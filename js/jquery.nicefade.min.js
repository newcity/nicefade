(function(e){var k,h,b,g,j,a,f,d,i,c;e.fn.nicefade=function(l){this.next=function(){f=true;c.fadeTo(g,c.loopCycler,false)};this.previous=function(){f=true;c.fadeTo(j,c.loopCycler,false)};this.seek=function(m){f=true;c.fadeTo(k.children(":nth-child("+m+")"),c.loopCycler,false)};return this.each(function(){k=e(this);var m=e.extend({animationSpeed:500,animationDelay:5000,indexList:k.siblings(".nicefade_index-list"),initialIndex:1,currentClass:"current",afterSlideChange:null,beforeSlideChange:null},l);c={init:function(){setTimeout(function(){c.loopCycler()},m.animationDelay)},fadeTo:function(n,p,o){k.data("target_slide",n);if(e.isFunction(m.beforeSlideChange)){m.beforeSlideChange()}h.stop().fadeTo(m.animationSpeed,0,function(){e(this).removeClass(m.currentClass).hide()});h=n.stop().fadeTo(m.animationSpeed,1,function(){if(p){p()}c.updateSlideStatus();if(!o){c.updateIndex()}e.when(e(this).addClass(m.currentClass)).done(function(){if(e.isFunction(m.afterSlideChange)){m.afterSlideChange()}})});k.data("current_slide",h);if(o){c.updateIndex()}},loopCycler:function(){if(!f){c.fadeTo(g,function(){setTimeout(function(){c.loopCycler()},m.animationDelay)},false)}},updateSlideStatus:function(){j=h.prev();g=h.next();if(!g.length){g=k.children(":first")}if(!j.length){j=k.children(":last")}k.data("target_slide",g)},updateIndex:function(){var n=h.index()+1;a.children(":nth-child("+n+")").addClass(m.currentClass).siblings().removeClass(m.currentClass)}};h=e("> *:nth-child("+m.initialIndex+")",k);b=e();c.updateSlideStatus();a=m.indexList;f=false;e(this).data("current_slide",h);e(this).data("slideshow_length",k.children().length);k.children().not(h).hide();a.children(":nth-child("+m.initialIndex+")").addClass(m.currentClass);a.find("a").click(function(p){p.preventDefault();f=true;var o=e(p.target).parent().index(),n=k.children(":nth-child("+(o+1)+")");b=n;k.data("target_slide",b);c.fadeTo(n,e.noop(),true)});c.init()})}})(jQuery);