(function(e){var k,h,c,g,j,a,f,i,d,b;e.fn.nicefade=function(l){this.next=function(){f=true;c=g;d.fadeTo(c,d.loopCycler,false)};this.previous=function(){f=true;c=j;d.fadeTo(c,d.loopCycler,false)};this.seek=function(m){f=true;m=parseInt(m);c=k.children(":nth-child("+m+")");d.fadeTo(c,d.loopCycler,false)};this.stop=function(){f=true};this.is_active=function(){return !f};this.current_slide=function(){return h};this.slideshow_length=function(){return k.children().length};this.target_slide=function(){return c};return this.each(function(){k=e(this);b=e.extend({animationSpeed:500,animationDelay:5000,indexList:k.siblings(".nicefade_index-list"),initialIndex:1,currentClass:"current",afterSlideChange:null,beforeSlideChange:null},l);d={init:function(){h=e("> *:nth-child("+b.initialIndex+")",k);c=e();d.updateSlideStatus();a=b.indexList;f=false;k.children().not(h).hide();a.children(":nth-child("+b.initialIndex+")").addClass(b.currentClass);a.find("a").click(function(o){o.preventDefault();f=true;var n=e(o.target).parent().index(),m=k.children(":nth-child("+(n+1)+")");c=m;d.fadeTo(m,e.noop(),true)});setTimeout(function(){d.loopCycler()},b.animationDelay)},fadeTo:function(m,o,n){if(e.isFunction(b.beforeSlideChange)){b.beforeSlideChange()}h.stop().fadeTo(b.animationSpeed,0,function(){e(this).removeClass(b.currentClass).hide()});h=m.stop().fadeTo(b.animationSpeed,1,function(){if(o){o()}d.updateSlideStatus();if(!n){d.updateIndex()}e.when(e(this).addClass(b.currentClass)).done(function(){if(e.isFunction(b.afterSlideChange)){b.afterSlideChange()}})});if(n){d.updateIndex()}},loopCycler:function(){if(!f){d.fadeTo(g,function(){setTimeout(function(){d.loopCycler()},b.animationDelay)},false)}},updateSlideStatus:function(){j=h.prev();g=h.next();if(!g.length){g=k.children(":first")}if(!j.length){j=k.children(":last")}c=e()},updateIndex:function(){var m=h.index()+1;a.children(":nth-child("+m+")").addClass(b.currentClass).siblings().removeClass(b.currentClass)}};d.init()})}})(jQuery);